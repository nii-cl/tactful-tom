# å†…å®¹æ›¿æ¢å®ŒæˆæŠ¥å‘Š

ç”Ÿæˆæ—¶é—´ï¼š2025-11-02

## âœ… æ›¿æ¢å®Œæˆ

æ‰€æœ‰ `_c` å†…å®¹å·²æˆåŠŸæ›¿æ¢ä¸º `_q` å†…å®¹ï¼

---

## ğŸ“Š å¤„ç†ç»Ÿè®¡

### æ–‡ä»¶å¤„ç†æƒ…å†µ

| æ–‡ä»¶ | æ€»é¡¹ç›®æ•° | ä¿®æ”¹é¡¹ç›®æ•° | æ›¿æ¢æ¬¡æ•° | çŠ¶æ€ |
|------|----------|-----------|---------|------|
| `Tactful_conv_set_0.json` | 36 | 0 | 0 | âœ… æ— éœ€å¤„ç† |
| `Tactful_conv_set_1.json` | 9 | 2 | 2 | âœ… **å·²å®Œæˆ** |
| `Tactful_conv_set_2.json` | 14 | 0 | 0 | âœ… æ— éœ€å¤„ç† |
| `Tactful_conv_set_3.json` | 16 | 0 | 0 | âœ… æ— éœ€å¤„ç† |
| `Tactful_conv_set_4.json` | 25 | 3 | 7 | âœ… **å·²å®Œæˆ** |
| **æ€»è®¡** | **100** | **5** | **9** | âœ… **å…¨éƒ¨å®Œæˆ** |

---

## ğŸ“ è¯¦ç»†æ›¿æ¢è®°å½•

### Tactful_conv_set_1.json - 2 ä¸ªé¡¹ç›®

#### Set 1-6-0-1
- **å­—æ®µ**: `justificationQA`
- **æ—§å†…å®¹**: "Natsuki and Kenniel said the gifts were from Santa for Rosary"
- **æ–°å†…å®¹**: "the gifts were from Santa for Rosary"
- **è¯´æ˜**: ç§»é™¤äº† "Natsuki and Kenniel said" å‰ç¼€

#### Set 1-7-0-0
- **å­—æ®µ**: `justificationQA`
- **æ—§å†…å®¹**: "Evalina and Orvin said the Easter Duskaunny came during the night and left eggs"
- **æ–°å†…å®¹**: "the Easter Duskaunny came during the night and left eggs"
- **è¯´æ˜**: ç§»é™¤äº† "Evalina and Orvin said" å‰ç¼€

### Tactful_conv_set_4.json - 3 ä¸ªé¡¹ç›®

#### Set 4-12-1-2
- **å­—æ®µ**: `justificationQA`
- **æ›¿æ¢æ¬¡æ•°**: 1
- **æ—§å†…å®¹**: "Atara and Easton say Esmeralda's yogurt tastes fabulous"
- **æ–°å†…å®¹**: "Esmeralda's yogurt tastes fabulous"
- **è¯´æ˜**: ç§»é™¤äº† "Atara and Easton say" å‰ç¼€

#### Set 4-13-3-1
- **å­—æ®µ**: å¤šä¸ªå­—æ®µ
- **æ›¿æ¢æ¬¡æ•°**: 3
- **è¯´æ˜**: è¿™ä¸ªé¡¹ç›®åœ¨å¤šä¸ªå­—æ®µä¸­åŒ…å« `_c` å†…å®¹ï¼Œå…¨éƒ¨å·²æ›¿æ¢

#### Set 4-13-4-2
- **å­—æ®µ**: å¤šä¸ªå­—æ®µ
- **æ›¿æ¢æ¬¡æ•°**: 3
- **è¯´æ˜**: è¿™ä¸ªé¡¹ç›®åœ¨å¤šä¸ªå­—æ®µä¸­åŒ…å« `_c` å†…å®¹ï¼Œå…¨éƒ¨å·²æ›¿æ¢

---

## ğŸ” æ›¿æ¢æ¨¡å¼åˆ†æ

### ä¸»è¦æ›¿æ¢ç±»å‹

æ‰€æœ‰æ›¿æ¢éƒ½éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼š

**æ¨¡å¼ 1: lie å­—æ®µ**
- `_c` ç‰ˆæœ¬: "{è¯´è¯è€…} said/say {å†…å®¹}"
- `_q` ç‰ˆæœ¬: "{å†…å®¹}"
- **ç¤ºä¾‹**: 
  - æ—§: "Natsuki and Kenniel said the gifts were from Santa for Rosary"
  - æ–°: "the gifts were from Santa for Rosary"

**æ¨¡å¼ 2: real_reason å­—æ®µ**
- å¦‚æœ `_c` å’Œ `_q` å†…å®¹ç›¸åŒï¼Œåˆ™ä¸æ›¿æ¢
- å¤§éƒ¨åˆ† `real_reason_c` å’Œ `real_reason_q` æ˜¯ç›¸åŒçš„

**æ¨¡å¼ 3: truth å­—æ®µ**
- `_c` ç‰ˆæœ¬: å®Œæ•´æè¿°
- `_q` ç‰ˆæœ¬: ç®€æ´æè¿°
- **ç¤ºä¾‹**:
  - æ—§: "Natsuki and Kenniel prepared the gifts and pretended they were from Santa"
  - æ–°: "Natsuki and Kenniel prepared the gifts"

---

## ğŸ’¾ å¤‡ä»½æ–‡ä»¶

æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶éƒ½å·²åˆ›å»ºå¤‡ä»½ï¼š

```
dataset/final_set/Tactful_conv_set_1.json.backup
dataset/final_set/Tactful_conv_set_4.json.backup
```

å¦‚éœ€æ¢å¤ï¼š

```bash
# æ¢å¤ Set 1
cp dataset/final_set/Tactful_conv_set_1.json.backup \
   dataset/final_set/Tactful_conv_set_1.json

# æ¢å¤ Set 4
cp dataset/final_set/Tactful_conv_set_4.json.backup \
   dataset/final_set/Tactful_conv_set_4.json
```

---

## âœ… éªŒè¯ç»“æœ

æ‰€æœ‰æ–‡ä»¶å·²é€šè¿‡éªŒè¯ï¼š

```
âœ“ Set 0: Items with _c content in questions: 0
âœ“ Set 1: Items with _c content in questions: 0
âœ“ Set 2: Items with _c content in questions: 0
âœ“ Set 3: Items with _c content in questions: 0
âœ“ Set 4: Items with _c content in questions: 0
```

âœ… **ç¡®è®¤ï¼šæ‰€æœ‰é—®é¢˜å­—æ®µä¸­ä¸å†åŒ…å« `_c` ç‰ˆæœ¬çš„å†…å®¹**

---

## ğŸ“ˆ å½±å“åˆ†æ

### å½±å“çš„å­—æ®µç±»å‹
- âœ… `justificationQA` - ä¸»è¦å½±å“å­—æ®µ
- âœ… å…¶ä»–é—®é¢˜å­—æ®µï¼ˆåœ¨ Set 4 çš„éƒ¨åˆ†é¡¹ç›®ä¸­ï¼‰

### æœªå½±å“çš„å­—æ®µ
- âœ… `lie` å­—æ®µçš„å®šä¹‰ï¼ˆä¿ç•™äº† `_c` å’Œ `_q` ä¸¤ä¸ªç‰ˆæœ¬ï¼‰
- âœ… `set_id` - é¡¹ç›®æ ‡è¯†
- âœ… `characters` - è§’è‰²ä¿¡æ¯
- âœ… å¯¹è¯å†…å®¹ï¼ˆ`full_context`, `short_context` ç­‰ï¼‰

---

## ğŸ¯ æ›¿æ¢é€»è¾‘æ€»ç»“

### è„šæœ¬å·¥ä½œåŸç†

1. **æå–æ›¿æ¢å¯¹**: ä»æ¯ä¸ªé¡¹ç›®çš„ `lie` å­—æ®µä¸­æå– `_c` å’Œ `_q` å†…å®¹
   - æ¡ä»¶ï¼š`_c` å’Œ `_q` éƒ½å­˜åœ¨ä¸”å†…å®¹ä¸åŒ

2. **æŸ¥æ‰¾åŒ¹é…**: åœ¨é—®é¢˜å­—æ®µä¸­æŸ¥æ‰¾ä½¿ç”¨äº† `_c` å†…å®¹çš„åœ°æ–¹

3. **æ‰§è¡Œæ›¿æ¢**: å°† `_c` å†…å®¹æ›¿æ¢ä¸ºå¯¹åº”çš„ `_q` å†…å®¹

4. **ä¿æŠ¤å­—æ®µ**: ä¸ä¿®æ”¹å…ƒæ•°æ®å­—æ®µï¼ˆ`lie`, `set_id`, `characters`ï¼‰

### ä¸ºä»€ä¹ˆåªæœ‰å°‘æ•°é¡¹ç›®éœ€è¦æ›¿æ¢ï¼Ÿ

- å¤§éƒ¨åˆ†é—®é¢˜ç”Ÿæˆä»£ç å·²ç»æ­£ç¡®ä½¿ç”¨äº† `_q` å­—æ®µ
- åªæœ‰ä¸ªåˆ«åœ°æ–¹ï¼ˆä¸»è¦æ˜¯ `justificationQA`ï¼‰åœ¨æŸäº›æƒ…å†µä¸‹è¯¯ç”¨äº† `_c` å†…å®¹
- è¿™ 5 ä¸ªé¡¹ç›®å¯èƒ½æ˜¯æ—©æœŸæµ‹è¯•ç‰ˆæœ¬æˆ–ç‰¹å®šæ¡ä»¶ä¸‹çš„ä»£ç åˆ†æ”¯

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### âœ… å·²å®Œæˆçš„å·¥ä½œ
- [x] åˆ†ææ‰€æœ‰ final_set æ–‡ä»¶
- [x] è¯†åˆ«éœ€è¦æ›¿æ¢çš„å†…å®¹
- [x] æ‰§è¡Œæ›¿æ¢æ“ä½œ
- [x] åˆ›å»ºå¤‡ä»½æ–‡ä»¶
- [x] éªŒè¯æ›¿æ¢ç»“æœ
- [x] ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

### ğŸ’¡ åç»­å»ºè®®

1. **ä¿ç•™å¤‡ä»½**: å»ºè®®ä¿ç•™ `.backup` æ–‡ä»¶ä¸€æ®µæ—¶é—´ï¼Œç¡®è®¤æ— è¯¯åå†åˆ é™¤
2. **ä»£ç å®¡æŸ¥**: æ£€æŸ¥ `question_generators.py` ç¡®ä¿æœªæ¥ç”Ÿæˆçš„é—®é¢˜ä½¿ç”¨ `_q` å­—æ®µ
3. **æµ‹è¯•éªŒè¯**: è¿è¡Œä½ çš„è¯„ä¼°è„šæœ¬ç¡®è®¤æ›¿æ¢åçš„æ•°æ®æ­£å¸¸å·¥ä½œ

---

## ğŸ› ï¸ ä½¿ç”¨çš„å·¥å…·

**è„šæœ¬**: `code/replace_c_with_q_content.py`

**ä¸»è¦åŠŸèƒ½**:
- è‡ªåŠ¨æ£€æµ‹ `_c` å’Œ `_q` å†…å®¹å·®å¼‚
- åœ¨é—®é¢˜å­—æ®µä¸­ç²¾ç¡®æŸ¥æ‰¾å’Œæ›¿æ¢
- è‡ªåŠ¨å¤‡ä»½å’Œè¯¦ç»†æ—¥å¿—
- æ”¯æŒåˆ†ææ¨¡å¼å’Œæ‰§è¡Œæ¨¡å¼

**å‘½ä»¤ç¤ºä¾‹**:
```bash
# åˆ†æ
python code/replace_c_with_q_content.py --input <æ–‡ä»¶> --analyze-only

# æ‰§è¡Œæ›¿æ¢
python code/replace_c_with_q_content.py --input <æ–‡ä»¶>

# å®‰é™æ¨¡å¼
python code/replace_c_with_q_content.py --input <æ–‡ä»¶> --quiet
```

---

## ğŸ“ æ€»ç»“

âœ… **æ›¿æ¢æˆåŠŸå®Œæˆï¼**

- å¤„ç†äº† 100 ä¸ªé¡¹ç›®
- ä¿®æ”¹äº† 5 ä¸ªé¡¹ç›®
- å®Œæˆäº† 9 æ¬¡å†…å®¹æ›¿æ¢
- æ‰€æœ‰æ–‡ä»¶éªŒè¯é€šè¿‡
- å¤‡ä»½æ–‡ä»¶å·²åˆ›å»º

ç°åœ¨æ‰€æœ‰çš„é—®é¢˜éƒ½ä½¿ç”¨äº†æ­£ç¡®çš„ `_q`ï¼ˆç®€æ´ç‰ˆæœ¬ï¼‰å†…å®¹ï¼Œè€Œä¸æ˜¯ `_c`ï¼ˆå®Œæ•´å¥å­ï¼‰å†…å®¹ã€‚

ğŸ‰ **æ•°æ®é›†æ¸…ç†å®Œæˆï¼**

